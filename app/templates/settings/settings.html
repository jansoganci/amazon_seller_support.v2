{% extends "base_tailwind.html" %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-2xl font-bold mb-8 text-gray-900 dark:text-white">Ayarlar</h1>
    
    <!-- Profil Ayarları -->
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8 border border-gray-200 dark:border-gray-700">
        <h2 class="text-xl font-semibold mb-6 text-gray-900 dark:text-white">Profil Bilgileri</h2>
        <form method="POST" class="space-y-4">
            <div>
                <label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">İsim</label>
                <input type="text" name="name" id="name" value="{{ current_user.name }}"
                    class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white">
            </div>
            <div>
                <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">E-posta</label>
                <input type="email" name="email" id="email" value="{{ current_user.email }}"
                    class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white">
            </div>
            <button type="submit" name="update_profile" value="1"
                class="bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md">
                Profili Güncelle
            </button>
        </form>
    </div>

    <!-- Şifre Değiştirme -->
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8 border border-gray-200 dark:border-gray-700">
        <h2 class="text-xl font-semibold mb-6 text-gray-900 dark:text-white">Şifre Değiştirme</h2>
        <form method="POST" class="space-y-4">
            <div>
                <label for="current_password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Mevcut Şifre</label>
                <input type="password" name="current_password" id="current_password"
                    class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white">
            </div>
            <div>
                <label for="new_password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Yeni Şifre</label>
                <input type="password" name="new_password" id="new_password"
                    class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white">
            </div>
            <div>
                <label for="confirm_password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Yeni Şifre (Tekrar)</label>
                <input type="password" name="confirm_password" id="confirm_password"
                    class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white">
            </div>
            <button type="submit" name="update_password" value="1"
                class="bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md">
                Şifreyi Güncelle
            </button>
        </form>
    </div>

    <!-- Uygulama Ayarları -->
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700">
        <h2 class="text-xl font-semibold mb-6 text-gray-900 dark:text-white">Uygulama Ayarları</h2>
        <form method="POST" class="space-y-6">
            <!-- Dil Seçimi -->
            <div>
                <label for="language" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Dil</label>
                <select name="language" id="language"
                    class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white">
                    <option value="tr" {% if current_user.preferences.language == 'tr' %}selected{% endif %}>Türkçe</option>
                    <option value="en" {% if current_user.preferences.language == 'en' %}selected{% endif %}>English</option>
                </select>
            </div>

            <!-- Para Birimi -->
            <div>
                <label for="currency" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Para Birimi</label>
                <select name="currency" id="currency"
                    class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white">
                    <option value="TRY" {% if current_user.preferences.currency == 'TRY' %}selected{% endif %}>Türk Lirası (₺)</option>
                    <option value="USD" {% if current_user.preferences.currency == 'USD' %}selected{% endif %}>US Dollar ($)</option>
                    <option value="EUR" {% if current_user.preferences.currency == 'EUR' %}selected{% endif %}>Euro (€)</option>
                </select>
            </div>

            <!-- Tema Seçimi -->
            <div>
                <label for="theme" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Tema</label>
                <select name="theme" id="theme"
                    class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white">
                    <option value="light" {% if current_user.preferences.theme == 'light' %}selected{% endif %}>Açık Tema</option>
                    <option value="dark" {% if current_user.preferences.theme == 'dark' %}selected{% endif %}>Koyu Tema</option>
                </select>
            </div>

            <!-- Bildirim Ayarları -->
            <div class="space-y-4">
                <h3 class="text-lg font-medium text-gray-900 dark:text-white">Bildirim Ayarları</h3>
                <div class="space-y-2">
                    <div class="flex items-center">
                        <input type="checkbox" name="email_notifications" id="email_notifications"
                            {% if current_user.preferences.notifications.email %}checked{% endif %}
                            class="h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500">
                        <label for="email_notifications" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">
                            E-posta Bildirimleri
                        </label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" name="browser_notifications" id="browser_notifications"
                            {% if current_user.preferences.notifications.browser %}checked{% endif %}
                            class="h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500">
                        <label for="browser_notifications" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">
                            Tarayıcı Bildirimleri
                        </label>
                    </div>
                </div>
            </div>

            <button type="submit" name="update_preferences" value="1"
                class="bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md">
                Tercihleri Kaydet
            </button>
        </form>
    </div>
</div>

<!-- Dark Mode Toggle Script -->
<script>
    // Sayfa yüklendiğinde mevcut temayı ayarla
    document.addEventListener('DOMContentLoaded', function() {
        const theme = document.getElementById('theme').value;
        if (theme === 'dark') {
            document.documentElement.classList.add('dark');
            localStorage.theme = 'dark';
        } else {
            document.documentElement.classList.remove('dark');
            localStorage.theme = 'light';
        }
    });

    // Tema değiştirildiğinde
    document.getElementById('theme').addEventListener('change', function() {
        const theme = this.value;
        if (theme === 'dark') {
            document.documentElement.classList.add('dark');
            localStorage.theme = 'dark';
        } else {
            document.documentElement.classList.remove('dark');
            localStorage.theme = 'light';
        }
    });
</script>
{% endblock %}
